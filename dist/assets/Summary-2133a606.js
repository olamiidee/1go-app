import{u as M,f as Q,r as b,g as _,j as t,F as y,a as e,H as U,L as V,b as q,S as J,A as S,i as k,O as P,K as C}from"./index-505f3368.js";const te=()=>{const{morningBookingTimesFromDb:m,noonBookingTimesFromDb:i,loader:D,currentUserFromDb:c,setActiveRideChange:A,setBookingSuccess:W,navigate:X,createRideDoc:R,formattedDate:d,setLoader:p,createdAt:Y,ridesToday:Z,freeRideBanner:T,cancelBookFreeRide:F,bookFreeRide:ee,bookingSuccess:re}=M();let $=[...m,...i];const{id:E}=Q(),l=$.filter(s=>s.id===E)[0],[f,u]=b.useState(""),[r,L]=b.useState({terminal:"",seats:""});function h(s){u("");const{id:a,value:n}=s.target;L(I=>({...I,[a]:n}))}const x=m==null?void 0:m.filter(s=>s.time===l.time)[0],g=i==null?void 0:i.filter(s=>s.time===l.time)[0];async function G(){p(!0);try{if(x){const s=S(k,"morningBookingTimes",`${x.id}`);let n=(await P(s)).data();await C(s,{slots:Number(n==null?void 0:n.slots)-Number(r==null?void 0:r.seats)})}if(g){const s=S(k,"noonBookingTimes",`${g.id}`);let n=(await P(s)).data();await C(s,{slots:Number(n==null?void 0:n.slots)-Number(r==null?void 0:r.seats)})}}catch(s){console.log(s)}finally{p(!1)}}const O={reference:new Date().getTime().toString(),email:`${c==null?void 0:c.email}`,amount:`${r!=null&&r.seats?(l==null?void 0:l.price)*(r==null?void 0:r.seats):l==null?void 0:l.price}00`,publicKey:"pk_test_e56146887f0492a4016277927d6b67d19843cb32"},j=_(O),B=s=>{console.log(s),p(!0),A(a=>!a),R(c.email,l.time,l.price,s.reference,d,r.terminal,r.seats),G()},H=()=>{alert("Transaction was not completed, window closed.")},K=()=>e("div",{children:e("button",{type:"submit",className:"w-full md:w-[fit-content] px-10 py-2 bg-blue-400 hover:bg-blue-400/70 border border-blue-400 text-white rounded-md my-3",onClick:()=>{j(B,H)},children:"Proceed to payment"})}),[o,N]=b.useState(!1);function w(){N(!0)}function z(){N(!1)}function v(s){s.preventDefault(),r.terminal&&r.seats&&r.seats<=l.slots?w():!r.terminal||!r.seats?u("Please fill all fields"):Number(r==null?void 0:r.seats)>Number(l==null?void 0:l.slots)?u("Number of seats cannot be more than available seats"):w()}return t(y,{children:[e(U,{}),D&&e(V,{}),t("section",{className:"w-full min-h-screen py-40 bg-gradient-to-b from-zinc-500/70 to-blue-400/10 text-slate-700",children:[t("div",{className:"absolute top-0 md:top-1 left-4 md:left-[10.5%] text-[0.9rem] text-slate-200 flex gap-2 items-center",children:[e("img",{alt:"",src:"/images/icons8-information-64.png",className:"w-4 h-4"}),e("p",{className:"underline",children:"Contact us"})]}),t("div",{className:"w-full px-[5%] sm:px-[10.5%]",children:[t("div",{className:"flex",children:[e("h2",{onClick:z,className:` ${o?"bg-white/30 text-white":"bg-white text-black"} text-[.9rem] md:text-[1.2rem] font-medium w-[fit-content] py-2 px-5 rounded-t-lg border-none relative bottom-[-2px]`,children:"Set details"}),e("h2",{onClick:v,className:` ${o?"bg-white text-black":"bg-white/30 text-white"} text-[.9rem] md:text-[1.2rem] font-medium w-[fit-content] py-2 px-5 rounded-t-lg border-none relative bottom-[-2px]`,children:"Summary"})]}),!o&&t("div",{className:"w-full min-h-[340px] md:min-h-[260px] bg-white rounded-b-lg rounded-tr-lg p-4 relative",children:[t("div",{className:"w-full p-3 mb-4 bg-blue-400/10 text-[0.9rem] md:text-[1rem] rounded-md hidden md:flex flex-wrap md:flex-nowrap",children:[t("div",{className:"flex items-center px-2 py-1 md:p-2 border-2 border-blue-400/50 rounded-md md:mr-4",children:[e("img",{alt:"",src:"/images/icons8-time-30.png",className:"w-6 h-6 mr-1"}),t("p",{children:["Time: ",e("strong",{children:l==null?void 0:l.time})]})]}),t("div",{className:"flex items-center px-2 py-1 md:p-2 border-2 border-blue-400/50 rounded-md md:mr-4",children:[e("img",{alt:"",src:"/images/icons8-calendar-50.png",className:"w-6 h-6 mr-1"}),t("p",{children:["Date: ",e("strong",{children:d})]})]}),t("div",{className:"flex items-center px-2 py-1 md:p-2 border-2 border-blue-400/50 rounded-md mr-auto",children:[e("img",{alt:"",src:"/images/icons8-cost-58.png",className:"w-6 h-6 mr-1"}),t("p",{children:["Price:"," ",t("strong",{children:["NGN"," ",r!=null&&r.seats?(l==null?void 0:l.price)*(r==null?void 0:r.seats):l==null?void 0:l.price]})]})]})]}),t("div",{className:"w-full p-3 mb-4 bg-blue-400/10 text-[0.9rem] md:text-[1rem] rounded-md flex md:hidden flex-wrap md:flex-nowrap",children:[t("div",{className:"w-full flex items-center px-2 py-1 mb-2 md:p-2 border-2 border-blue-400/50 rounded-md md:mr-4",children:[t("div",{className:"mr-auto flex items-center",children:[e("img",{alt:"",src:"/images/icons8-time-30.png",className:"w-6 h-6 mr-1"}),e("p",{children:"Time: "})]}),e("p",{className:"font-bold",children:l==null?void 0:l.time})]}),t("div",{className:"w-full flex items-center px-2 py-1 mb-2 md:p-2 border-2 border-blue-400/50 rounded-md md:mr-4",children:[t("div",{className:"mr-auto flex items-center",children:[e("img",{alt:"",src:"/images/icons8-calendar-50.png",className:"w-6 h-6 mr-1"}),e("p",{children:"Date: "})]}),e("p",{className:"font-bold",children:d})]}),t("div",{className:"w-full flex items-center px-2 py-1 mb-2 md:p-2 border-2 border-blue-400/50 rounded-md md:mr-4",children:[t("div",{className:"mr-auto flex items-center",children:[e("img",{alt:"",src:"/images/icons8-cost-58.png",className:"w-6 h-6 mr-1"}),e("p",{children:"Price: "})]}),t("p",{className:"font-bold",children:["NGN",r!=null&&r.seats?(l==null?void 0:l.price)*(r==null?void 0:r.seats):l==null?void 0:l.price]})]})]}),t("form",{className:"max-w-[400px]",children:[t("label",{htmlFor:"terminal",className:"font-bold text-[1.1rem]",children:["Choose a Pick-up terminal"," ",e("span",{className:"text-red-600",children:"*"})]})," ",e("br",{}),t("select",{id:"terminal",onChange:h,defaultValue:"DEFAULT",className:"w-full bg-blue-400/10 mt-2 py-1 px-3 mb-4 rounded-md cursor-pointer outline-none border border-blue-400/50",children:[e("option",{value:"DEFAULT",disabled:!0,hidden:!0,children:"Select terminal"}),l.from==="inside"?e("option",{value:"School park",children:"School park"}):t(y,{children:[e("option",{value:"Terminus",children:"Terminus"}),e("option",{value:"Mark",children:"Mark"}),e("option",{value:"Ilesanmi",children:"Ilesanmi"}),e("option",{value:"Sanrab",children:"Sanrab"}),e("option",{value:"Chapel",children:"Chapel"}),e("option",{value:"Okeodo",children:"Okeodo"}),e("option",{value:"Stella maris",children:"Stella maris"})]})]}),t("label",{htmlFor:"terminal",className:"font-bold text-[1.1rem]",children:["Select number of seats ",e("span",{className:"text-red-600",children:"*"})]}),e("br",{}),t("p",{className:"text-[.8rem] text-blue-400",children:["Number of available seats:"," ",e("span",{className:"font-bold",children:l.slots})]}),e("input",{id:"seats",type:"number",onChange:h,value:r.seats,className:"w-full bg-blue-400/10 mt-2 py-1 px-3 mb-4 rounded-md outline-none border border-blue-400/50"}),f!==""&&e("div",{className:"w-full flex gap-4 items-center py-3 px-10 my-2 bg-red-400/20 text-[0.85rem] rounded-lg border border-red-400",children:e("p",{children:f})}),e("button",{type:"submit",className:"w-full md:w-[fit-content] px-10 py-2 bg-blue-400 hover:bg-blue-400/70 border border-blue-400 text-white rounded-md my-3",onClick:v,children:"Proceed"})]})]}),o&&t("div",{className:"w-full min-h-[430px] md:min-h-[350px] bg-white rounded-b-lg rounded-tr-lg p-4 relative",children:[t("div",{className:"w-full p-3 mb-4 bg-blue-400/10 text-[0.9rem] md:text-[1rem] rounded-md hidden md:flex flex-wrap md:flex-nowrap",children:[t("div",{className:"flex items-center px-2 py-1 md:p-2 border-2 border-blue-400/50 rounded-md md:mr-4",children:[e("img",{alt:"",src:"/images/icons8-time-30.png",className:"w-6 h-6 mr-1"}),t("p",{children:["Time: ",e("strong",{children:l==null?void 0:l.time})]})]}),t("div",{className:"flex items-center px-2 py-1 md:p-2 border-2 border-blue-400/50 rounded-md md:mr-4",children:[e("img",{alt:"",src:"/images/icons8-calendar-50.png",className:"w-6 h-6 mr-1"}),t("p",{children:["Date: ",e("strong",{children:d})]})]}),t("div",{className:"flex items-center px-2 py-1 md:p-2 border-2 border-blue-400/50 rounded-md mr-auto",children:[e("img",{alt:"",src:"/images/icons8-cost-58.png",className:"w-6 h-6 mr-1"}),t("p",{children:["Price:"," ",t("strong",{children:["NGN"," ",r!=null&&r.seats?(l==null?void 0:l.price)*(r==null?void 0:r.seats):l==null?void 0:l.price]})]})]})]}),t("div",{className:"w-full p-3 mb-4 bg-blue-400/10 text-[0.9rem] md:text-[1rem] rounded-md flex md:hidden flex-wrap md:flex-nowrap",children:[t("div",{className:"w-full flex items-center px-2 py-1 mb-2 md:p-2 border-2 border-blue-400/50 rounded-md md:mr-4",children:[t("div",{className:"mr-auto flex items-center",children:[e("img",{alt:"",src:"/images/icons8-time-30.png",className:"w-6 h-6 mr-1"}),e("p",{children:"Time: "})]}),e("p",{className:"font-bold",children:l==null?void 0:l.time})]}),t("div",{className:"w-full flex items-center px-2 py-1 mb-2 md:p-2 border-2 border-blue-400/50 rounded-md md:mr-4",children:[t("div",{className:"mr-auto flex items-center",children:[e("img",{alt:"",src:"/images/icons8-calendar-50.png",className:"w-6 h-6 mr-1"}),e("p",{children:"Date: "})]}),e("p",{className:"font-bold",children:d})]}),t("div",{className:"w-full flex items-center px-2 py-1 mb-2 md:p-2 border-2 border-blue-400/50 rounded-md md:mr-4",children:[t("div",{className:"mr-auto flex items-center",children:[e("img",{alt:"",src:"/images/icons8-cost-58.png",className:"w-6 h-6 mr-1"}),e("p",{children:"Price: "})]}),t("p",{className:"font-bold",children:["NGN",r!=null&&r.seats?(l==null?void 0:l.price)*(r==null?void 0:r.seats):l==null?void 0:l.price]})]})]}),t("div",{className:"w-full p-3 mb-4 bg-blue-400/10 text-[0.9rem] md:text-[1rem] rounded-md flex flex-wrap gap-2 border sm:border-none border-blue-400/50",children:[e("p",{children:"Pick-up Terminal:"}),t("p",{className:"font-bold",children:[" ",r==null?void 0:r.terminal]})]}),t("div",{className:"w-full p-3 mb-4 bg-blue-400/10 text-[0.9rem] md:text-[1rem] rounded-md flex flex-wrap gap-2 border sm:border-none border-blue-400/50",children:[e("p",{children:"Number of seats:"}),t("p",{className:"font-bold",children:[" ",r==null?void 0:r.seats]})]}),e("p",{className:"text-[0.75rem] text-slate-500 absolute bottom-4 p-1 bg-blue-400/10",children:"PS: Prices may vary based on demand"}),e(K,{})]})]})]}),e(q,{}),e(J,{})]})};export{te as default};
